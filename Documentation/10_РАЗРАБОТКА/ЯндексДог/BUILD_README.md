# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ø–Ω–¥–µ–∫—Å–î–æ–≥

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Android NDK** r21+ –∏–ª–∏ –≤—ã—à–µ
- **CMake** 3.18.1 –∏–ª–∏ –≤—ã—à–µ
- **Android Studio** (–¥–ª—è Java –∫–æ–º–ø–∏–ª—è—Ü–∏–∏)
- **Gradle** (–≤—Å—Ç—Ä–æ–µ–Ω –≤ Android Studio)

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **Yandex MapKit SDK** - —á–µ—Ä–µ–∑ Gradle
- **OpenGL ES 3.0** - —á–µ—Ä–µ–∑ Android NDK
- **EGL** - —á–µ—Ä–µ–∑ Android NDK

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
–Ø–Ω–¥–µ–∫—Å–î–æ–≥/
‚îú‚îÄ‚îÄ native/              # –ù–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥ –Ω–∞ C
‚îÇ   ‚îú‚îÄ‚îÄ core/           # –û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ render/         # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ (OpenGL ES)
‚îÇ   ‚îú‚îÄ‚îÄ data/           # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ jni/            # JNI —Å–ª–æ–π
‚îÇ   ‚îî‚îÄ‚îÄ utils/          # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ java/               # Java –∫–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ com/tiggo/navigator/
‚îú‚îÄ‚îÄ config/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ api_key.txt     # API –∫–ª—é—á Yandex MapKit
‚îî‚îÄ‚îÄ CMakeLists.txt      # CMake –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Android Studio

**–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π Android –ø—Ä–æ–µ–∫—Ç:**

1. File ‚Üí New ‚Üí New Project
2. –í—ã–±—Ä–∞—Ç—å "Native C++"
3. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π SDK: API 21 (Android 5.0)
4. –î–æ–±–∞–≤–∏—Ç—å C++ support

**–ù–∞—Å—Ç—Ä–æ–∏—Ç—å build.gradle:**

```gradle
android {
    compileSdkVersion 33
    ndkVersion "21.4.7075529"

    defaultConfig {
        minSdkVersion 21
        targetSdkVersion 33

        externalNativeBuild {
            cmake {
                cppFlags "-std=c99"
                arguments "-DANDROID_STL=c++_shared"
            }
        }

        ndk {
            abiFilters 'armeabi-v7a', 'arm64-v8a', 'x86', 'x86_64'
        }
    }

    externalNativeBuild {
        cmake {
            path "CMakeLists.txt"
            version "3.18.1"
        }
    }
}

dependencies {
    implementation 'com.yandex.android:mapkit:3.5.0'
}
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–∞

**–§–∞–π–ª:** `config/api_key.txt`

```
c75cd846-c6de-425a-b974-41917fec5071
```

**–§–∞–π–ª:** `config/api_key.properties`

```properties
yandex.mapkit.api.key=c75cd846-c6de-425a-b974-41917fec5071
```

API –∫–ª—é—á –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ `ApiKeyManager.java`.

### 4. CMake –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª:** `CMakeLists.txt` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:

- C99 —Å—Ç–∞–Ω–¥–∞—Ä—Ç
- OpenGL ES 3.0
- EGL
- –í—Å–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã

## üî® –°–±–æ—Ä–∫–∞

### –ß–µ—Ä–µ–∑ Android Studio

1. **–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç:**

   ```
   File ‚Üí Open ‚Üí –≤—ã–±—Ä–∞—Ç—å –ø–∞–ø–∫—É development/–Ø–Ω–¥–µ–∫—Å–î–æ–≥
   ```

2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å Gradle:**

   ```
   File ‚Üí Sync Project with Gradle Files
   ```

3. **–°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç:**

   ```
   Build ‚Üí Make Project (Ctrl+F9 / Cmd+F9)
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:**
   ```
   Run ‚Üí Run 'app' (Shift+F10 / Ctrl+R)
   ```

### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

```bash
cd development/–Ø–Ω–¥–µ–∫—Å–î–æ–≥
./gradlew assembleDebug
```

**–ì–¥–µ –Ω–∞–π—Ç–∏ APK:**

```
app/build/outputs/apk/debug/app-debug.apk
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ

1. –°–æ–∑–¥–∞—Ç—å AVD —Å API 21+
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —ç–º—É–ª—è—Ç–æ—Ä
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å APK: `adb install app-debug.apk`

### –ù–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

1. –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
2. –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É –ø–æ USB
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Android Studio

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
adb logcat | grep -E "(Tiggo|Yandex|Navigation)"
```

## üìä –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Å–±–æ—Ä–∫–µ

- ‚úÖ –ù–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥ (C99)
- ‚úÖ OpenGL ES —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- ‚úÖ UI —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
- ‚úÖ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ (—Ü–∏—Ñ—Ä—ã + –±—É–∫–≤—ã)
- ‚úÖ Java —Å–ª–æ–π
- ‚úÖ JNI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ Yandex MapKit –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### ‚è≥ –¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- ‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–ª–æ–≤ –æ—Ç Yandex
- ‚è≥ –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞—Ä—Ç—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- ‚è≥ –†–∞–±–æ—Ç–∞ –Ω–∞ –¥–≤—É—Ö –¥–∏—Å–ø–ª–µ—è—Ö

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–†–∞–∑–º–µ—Ä—ã –æ–∫–Ω–∞** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (1024x768)

   - **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∏–∑ Android

2. **–¢–µ–∫—Å—Ç—É—Ä—ã —Ç–∞–π–ª–æ–≤** - –ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∏

   - **–†–µ—à–µ–Ω–∏–µ:** –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç Yandex —á–µ—Ä–µ–∑ Java

3. **–ë—É–∫–≤—ã –∫–∏—Ä–∏–ª–ª–∏—Ü—ã** - –Ω–µ –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
   - **–†–µ—à–µ–Ω–∏–µ:** –†–∞—Å—à–∏—Ä–∏—Ç—å bitmap —à—Ä–∏—Ñ—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ**
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞—Ä—Ç—ã**
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI —ç–ª–µ–º–µ–Ω—Ç—ã**
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
5. **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏**

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

```bash
cd development/–Ø–Ω–¥–µ–∫—Å–î–æ–≥
mkdir -p build
cd build
cmake .. -DCMAKE_TOOLCHAIN_FILE=$ANDROID_NDK/build/cmake/android.toolchain.cmake \
        -DANDROID_ABI=arm64-v8a \
        -DANDROID_PLATFORM=android-21
make
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–¥–∞

```bash
adb logcat | grep -E "native|Tiggo|JNI"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Java

```bash
adb logcat | grep -E "Yandex|Navigation|TileLoader"
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Å–±–æ—Ä–∫–µ!

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —á–µ—Ä–µ–∑ Android Studio –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.
