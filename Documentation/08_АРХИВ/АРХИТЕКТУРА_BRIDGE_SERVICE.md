# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Bridge Service Ğ´Ğ»Ñ Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€Ğ°

## ğŸ¯ Ğ¦ĞµĞ»ÑŒ

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Bridge Service, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹:
1. **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€** - Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸
2. **Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ** - Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚, Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ñ‹, ĞºĞ°Ñ€Ñ‚Ğ°, Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
3. **ĞÑ‚Ñ€Ğ¸ÑĞ¾Ğ²Ñ‹Ğ²Ğ°ĞµÑ‚ ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ** - ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½ÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ±Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸
4. **ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ±Ğ¾Ñ€Ğ½ÑƒÑ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ** - Ñ‡ĞµÑ€ĞµĞ· ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ¿Ñ€Ğ¾ĞµĞºÑ†Ğ¸Ğ¸ (ĞºĞ°Ğº TurboDog)

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€                       â”‚
â”‚  (ru.yandex.yandexnavi)                 â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  UI Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ğ¹ Ğ¸ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸ĞµĞ¹          â”‚ â”‚
â”‚  â”‚  - Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ                 â”‚ â”‚
â”‚  â”‚  - ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚                         â”‚ â”‚
â”‚  â”‚  - ĞŸĞ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ñ‹                        â”‚ â”‚
â”‚  â”‚  - Ğ Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ/Ğ²Ñ€ĞµĞ¼Ñ                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bridge Service                         â”‚
â”‚  (com.desaysv.navibridge)              â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  NavigationMonitor                â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ AccessibilityService         â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ BroadcastReceiver           â”‚ â”‚
â”‚  â”‚  â””â”€â”€ MediaProjection (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  DataExtractor                    â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ExtractRoute()               â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ExtractTurns()               â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ ExtractDistance()            â”‚ â”‚
â”‚  â”‚  â””â”€â”€ ExtractMapImage()            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MapRenderer                       â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ RenderSimplifiedMap()         â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ RenderRoute()                 â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ RenderTurn()                  â”‚ â”‚
â”‚  â”‚  â””â”€â”€ RenderInfo()                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  SystemSender                     â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ SendNavigationData()        â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ SendMapImage()               â”‚ â”‚
â”‚  â”‚  â””â”€â”€ SendToCAN()                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Broadcast Intent
               â”‚ "turbodog.navigation.system.message"
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»Ñ                      â”‚
â”‚  â”œâ”€â”€ SVMeterInteraction                 â”‚
â”‚  â”œâ”€â”€ QNX ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°                        â”‚
â”‚  â””â”€â”€ CAN-ÑˆĞ¸Ğ½Ğ°                           â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ĞŸÑ€Ğ¸Ğ±Ğ¾Ñ€Ğ½Ğ°Ñ Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ                 â”‚ â”‚
â”‚  â”‚  - Ğ£Ğ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ°               â”‚ â”‚
â”‚  â”‚  - Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ğ°              â”‚ â”‚
â”‚  â”‚  - Ğ Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ/Ğ²Ñ€ĞµĞ¼Ñ                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  HUD (Head-Up Display)            â”‚ â”‚
â”‚  â”‚  - Ğ¡Ñ‚Ñ€ĞµĞ»ĞºĞ° Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ              â”‚ â”‚
â”‚  â”‚  - Ğ Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ´Ğ¾ Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ğ°          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Bridge Service

### 1. NavigationMonitor

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€Ğ°

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
```java
public class NavigationMonitor {
    private AccessibilityService accessibilityService;
    private BroadcastReceiver broadcastReceiver;
    private MediaProjection mediaProjection;
    
    public void startMonitoring() {
        // 1. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Accessibility Service
        startAccessibilityService();
        
        // 2. Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Broadcast Receiver
        registerBroadcastReceiver();
        
        // 3. (ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾) Ğ—Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ MediaProjection
        requestMediaProjection();
    }
    
    private void startAccessibilityService() {
        // ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ UI ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€Ğ°
    }
    
    private void registerBroadcastReceiver() {
        // Ğ¡Ğ»ÑƒÑˆĞ°ĞµĞ¼ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¾Ñ‚ Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€Ğ°
        IntentFilter filter = new IntentFilter();
        filter.addAction("ru.yandex.yandexnavi.NAVIGATION_STARTED");
        filter.addAction("ru.yandex.yandexnavi.NAVIGATION_UPDATED");
        // ...
    }
}
```

---

### 2. DataExtractor

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ· Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€Ğ°

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
```java
public class DataExtractor {
    public NavigationData extractFromAccessibility(AccessibilityEvent event) {
        NavigationData data = new NavigationData();
        
        // Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· UI
        if (event.getPackageName().equals("ru.yandex.yandexnavi")) {
            // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ñ‚ĞµĞºÑÑ‚
            String text = event.getText().toString();
            
            // ĞŸĞ°Ñ€ÑĞ¸Ğ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
            data.setTurnDistance(parseDistance(text));
            data.setTurnType(parseTurnType(text));
            data.setRemainingDistance(parseRemainingDistance(text));
            // ...
        }
        
        return data;
    }
    
    public NavigationData extractFromImage(Bitmap mapImage) {
        NavigationData data = new NavigationData();
        
        // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ ĞºĞ°Ñ€Ñ‚Ñ‹
        // - Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ°
        // - ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸
        // - Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ğ¾Ğ²
        
        return data;
    }
    
    public Bitmap captureMapImage() {
        // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ MediaProjection Ğ´Ğ»Ñ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚Ğ°
        // ĞĞ±Ñ€ĞµĞ·Ğ°ĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ñ‹
        return mapBitmap;
    }
}
```

---

### 3. MapRenderer

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ° ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ€Ñ‚Ñ‹

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
```java
public class MapRenderer {
    private static final int MAP_WIDTH = 800;
    private static final int MAP_HEIGHT = 480;
    
    public Bitmap renderSimplifiedMap(NavigationData data) {
        Bitmap bitmap = Bitmap.createBitmap(
            MAP_WIDTH, MAP_HEIGHT, Bitmap.Config.ARGB_8888
        );
        Canvas canvas = new Canvas(bitmap);
        
        // Ğ¤Ğ¾Ğ½
        canvas.drawColor(Color.BLACK);
        
        // Ğ Ğ¸ÑÑƒĞµĞ¼ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚
        drawRoute(canvas, data.getRoute());
        
        // Ğ Ğ¸ÑÑƒĞµĞ¼ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ñ
        drawCurrentPosition(canvas, data.getCurrentPosition());
        
        // Ğ Ğ¸ÑÑƒĞµĞ¼ Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚
        drawTurn(canvas, data.getNextTurn());
        
        // Ğ Ğ¸ÑÑƒĞµĞ¼ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
        drawInfo(canvas, data);
        
        return bitmap;
    }
    
    private void drawRoute(Canvas canvas, Route route) {
        Paint paint = new Paint();
        paint.setColor(Color.WHITE);
        paint.setStrokeWidth(4);
        paint.setStyle(Paint.Style.STROKE);
        
        Path path = new Path();
        for (Point point : route.getPoints()) {
            if (path.isEmpty()) {
                path.moveTo(point.x, point.y);
            } else {
                path.lineTo(point.x, point.y);
            }
        }
        
        canvas.drawPath(path, paint);
    }
    
    private void drawCurrentPosition(Canvas canvas, Point position) {
        Paint paint = new Paint();
        paint.setColor(Color.BLUE);
        canvas.drawCircle(position.x, position.y, 12, paint);
        
        // Ğ¡Ñ‚Ñ€ĞµĞ»ĞºĞ° Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ
        drawDirectionArrow(canvas, position, bearing);
    }
    
    private void drawTurn(Canvas canvas, TurnInfo turn) {
        if (turn == null) return;
        
        // Ğ˜ĞºĞ¾Ğ½ĞºĞ° Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ğ°
        Bitmap turnIcon = getTurnIcon(turn.getType());
        canvas.drawBitmap(turnIcon, turn.getX(), turn.getY(), null);
        
        // Ğ Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ´Ğ¾ Ğ¿Ğ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚Ğ°
        Paint textPaint = new Paint();
        textPaint.setColor(Color.WHITE);
        textPaint.setTextSize(28);
        textPaint.setTextAlign(Paint.Align.CENTER);
        
        String distance = formatDistance(turn.getDistance());
        canvas.drawText(distance, turn.getX(), turn.getY() + 60, textPaint);
    }
    
    private void drawInfo(Canvas canvas, NavigationData data) {
        Paint textPaint = new Paint();
        textPaint.setColor(Color.WHITE);
        textPaint.setTextSize(24);
        
        // ĞÑÑ‚Ğ°Ğ²ÑˆĞµĞµÑÑ Ñ€Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ
        String remaining = formatDistance(data.getRemainingDistance());
        canvas.drawText("ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ: " + remaining, 20, 40, textPaint);
        
        // ĞÑÑ‚Ğ°Ğ²ÑˆĞµĞµÑÑ Ğ²Ñ€ĞµĞ¼Ñ
        String time = formatTime(data.getRemainingTime());
        canvas.drawText("Ğ’Ñ€ĞµĞ¼Ñ: " + time, 20, 70, textPaint);
    }
}
```

---

### 4. SystemSender

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»Ñ

**Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:**
```java
public class SystemSender {
    public void sendNavigationData(NavigationData data, Bitmap mapImage) {
        // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· Broadcast Intent (ĞºĞ°Ğº TurboDog)
        Intent intent = new Intent("turbodog.navigation.system.message");
        
        // ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
        intent.putExtra("CODE", 200);
        intent.putExtra("DATA", 0);
        
        // ĞŸĞ¾Ğ²Ğ¾Ñ€Ğ¾Ñ‚
        intent.putExtra("TURN_TYPE", data.getTurnType());
        intent.putExtra("TURN_DIST", data.getTurnDistance());
        intent.putExtra("TURN_TIME", data.getTurnTime());
        
        // ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚
        intent.putExtra("REMAINING_DIST", data.getRemainingDistance());
        intent.putExtra("REMAINING_TIME", data.getRemainingTime());
        intent.putExtra("ARRIVE_TIME", data.getArriveTime());
        
        // Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ¸
        intent.putExtra("CURRENT_ROAD", data.getCurrentRoad());
        intent.putExtra("NEXT_ROAD", data.getNextRoad());
        
        // Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹ (ĞµÑĞ»Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ)
        if (mapImage != null) {
            byte[] imageBytes = bitmapToByteArray(mapImage);
            intent.putExtra("MAP_IMAGE", imageBytes);
        }
        
        sendBroadcast(intent);
    }
    
    private byte[] bitmapToByteArray(Bitmap bitmap) {
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
        return stream.toByteArray();
    }
}
```

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### 1. ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

```
Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ UI
    â†“
AccessibilityService Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ
    â†“
NavigationMonitor Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ
    â†“
DataExtractor Ğ¸Ğ·Ğ²Ğ»ĞµĞºĞ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
```

### 2. ĞÑ‚Ñ€Ğ¸ÑĞ¾Ğ²ĞºĞ°

```
NavigationData Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½
    â†“
MapRenderer ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½ÑƒÑ ĞºĞ°Ñ€Ñ‚Ñƒ
    â†“
Bitmap Ğ³Ğ¾Ñ‚Ğ¾Ğ²
```

### 3. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ°

```
Bitmap + NavigationData Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹
    â†“
SystemSender Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ Broadcast Intent
    â†“
ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ
    â†“
Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ±Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸
```

---

## ğŸ“‹ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
BridgeService/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ com/desaysv/navibridge/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ NavigationMonitor.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ DataExtractor.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ MapRenderer.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ SystemSender.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ NavigationData.java
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ NavigationAccessibilityService.java
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ BridgeService.java
â”‚   â”‚   â”‚   â”œâ”€â”€ res/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ drawable/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ turn_left.png
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ turn_right.png
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ...
â”‚   â”‚   â”‚   â””â”€â”€ AndroidManifest.xml
â”‚   â”‚   â””â”€â”€ test/
â”‚   â””â”€â”€ build.gradle
â””â”€â”€ README.md
```

---

## ğŸ¯ ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ°

1. âœ… **ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾:** Ğ£Ğ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ²Ñ‹Ğ³Ğ»ÑĞ´Ğ¸Ñ‚ ĞºĞ°Ğº Ğ² TurboDog
2. âœ… **ĞĞ°Ğ´ĞµĞ¶Ğ½Ğ¾:** ĞĞµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ UI Ğ¯Ğ½Ğ´ĞµĞºÑ ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ‚Ğ¾Ñ€Ğ°
3. âœ… **Ğ“Ğ¸Ğ±ĞºĞ¾:** ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ
4. âœ… **Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾:** Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ñ‚Ğ¾Ñ‚ Ğ¶Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ñ‡Ñ‚Ğ¾ TurboDog
5. âœ… **Ğ­Ñ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾:** ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ½Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ

---

**Ğ”Ğ°Ñ‚Ğ°:** 2024  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.0

