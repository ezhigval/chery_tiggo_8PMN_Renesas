# –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ App Package —Ä–µ—à–µ–Ω–∏—è

## üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –ø–∞–∫–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –ª–∞—É–Ω—á–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π:
1. –°–∫—Ä—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞—à–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Å–∏—Å—Ç–µ–º–æ–π

---

## üì¶ –°–æ—Å—Ç–∞–≤ –ø–∞–∫–µ—Ç–∞

### 1. Custom Launcher
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ª–∞—É–Ω—á–µ—Ä–∞
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –°–∫—Ä—ã—Ç–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏

### 2. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SVMedia
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–µ–¥–∏–∞-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∏
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –î–æ–±–∞–≤–ª–µ–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ "–Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∞"
  - –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ MediaSession API

### 3. Bridge Service
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å –ù–∞–≤–∏–≥–∞—Ç–æ—Ä–∞
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –ó–∞–ø—É—Å–∫ –Ø–Ω–¥–µ–∫—Å –ù–∞–≤–∏–≥–∞—Ç–æ—Ä–∞
  - –ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
  - –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º—É (CAN/QNX)

### 4. Media Bridge
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –º–µ–¥–∏–∞
- **–§—É–Ω–∫—Ü–∏–∏:**
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –æ—Ç –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∏
  - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ SVMeterInteraction
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –ø—Ä–∏–±–æ—Ä–Ω–æ–π –ø–∞–Ω–µ–ª–∏

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Custom Launcher (—Å–∏—Å—Ç–µ–º–Ω—ã–π)           ‚îÇ
‚îÇ  - –°–∫—Ä—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è        ‚îÇ
‚îÇ  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞—à–∏              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚îú‚îÄ‚îÄ‚ñ∫ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SVMedia
           ‚îÇ   ‚îî‚îÄ‚îÄ‚ñ∫ –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∞
           ‚îÇ       ‚îî‚îÄ‚îÄ‚ñ∫ Media Bridge
           ‚îÇ           ‚îî‚îÄ‚îÄ‚ñ∫ SVMeterInteraction
           ‚îÇ               ‚îî‚îÄ‚îÄ‚ñ∫ –ü—Ä–∏–±–æ—Ä–Ω–∞—è –ø–∞–Ω–µ–ª—å
           ‚îÇ
           ‚îú‚îÄ‚îÄ‚ñ∫ Bridge Service
           ‚îÇ   ‚îî‚îÄ‚îÄ‚ñ∫ –Ø–Ω–¥–µ–∫—Å –ù–∞–≤–∏–≥–∞—Ç–æ—Ä
           ‚îÇ       ‚îî‚îÄ‚îÄ‚ñ∫ –ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏–π
           ‚îÇ           ‚îî‚îÄ‚îÄ‚ñ∫ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
           ‚îÇ               ‚îî‚îÄ‚îÄ‚ñ∫ SVMeterInteraction
           ‚îÇ                   ‚îî‚îÄ‚îÄ‚ñ∫ CAN/QNX
           ‚îÇ
           ‚îî‚îÄ‚îÄ‚ñ∫ –î—Ä—É–≥–∏–µ –Ω–∞—à–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

---

## üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (3-5 –¥–Ω–µ–π)

#### 1.1 –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] –ò–∑—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ª–∞—É–Ω—á–µ—Ä —Å–∏—Å—Ç–µ–º—ã
- [ ] –ü–æ–Ω—è—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º —Å–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- [ ] –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º —Ä–∞–∑–¥–µ–ª–∞–º

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
adb shell pm list packages

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∞—É–Ω—á–µ—Ä–µ
adb shell pm query-activities -a android.intent.action.MAIN -c android.intent.category.HOME

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
adb shell dumpsys package | grep permission
```

#### 1.2 –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ADB
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

**–°–∫—Ä–∏–ø—Ç—ã:**
```bash
# backup_system.sh
#!/bin/bash
adb root
adb remount
adb pull /system/app/ ./backup/system_app/
adb pull /system/priv-app/ ./backup/system_priv-app/
```

#### 1.3 –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å SVMedia
- [ ] –î–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å SVMapService
- [ ] –ò–∑—É—á–∏—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –ü–æ–Ω—è—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –≤—ã–≤–æ–¥–∞ –Ω–∞ –ø—Ä–∏–±–æ—Ä–Ω—É—é –ø–∞–Ω–µ–ª—å

---

### –≠—Ç–∞–ø 2: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Custom Launcher (5-7 –¥–Ω–µ–π)

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –ª–∞—É–Ω—á–µ—Ä–∞

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç Android Studio
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π –ª–∞—É–Ω—á–µ—Ä
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–ö–æ–¥:**
```java
public class CustomLauncherActivity extends Activity {
    private RecyclerView appList;
    private AppListAdapter adapter;
    
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_launcher);
        
        appList = findViewById(R.id.app_list);
        adapter = new AppListAdapter(getInstalledApps());
        appList.setAdapter(adapter);
    }
    
    private List<AppInfo> getInstalledApps() {
        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
    }
}
```

#### 2.2 –°–∫—Ä—ã—Ç–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- [ ] –°–∫—Ä—ã—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ —Å–ø–∏—Å–∫–∞
- [ ] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**–ö–æ–¥:**
```java
private List<AppInfo> filterSystemApps(List<AppInfo> apps) {
    String[] systemPackages = {
        "com.desaysv.mediaapp",
        "com.desaysv.mapservice",
        // ... –¥—Ä—É–≥–∏–µ
    };
    
    return apps.stream()
        .filter(app -> !Arrays.asList(systemPackages).contains(app.packageName))
        .collect(Collectors.toList());
}
```

#### 2.3 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ª–∞—É–Ω—á–µ—Ä–∞

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å Intent Filter –¥–ª—è HOME
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞–∫ –ª–∞—É–Ω—á–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**AndroidManifest.xml:**
```xml
<activity
    android:name=".CustomLauncherActivity"
    android:launchMode="singleTask"
    android:theme="@android:style/Theme.NoTitleBar">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.HOME" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity>
```

---

### –≠—Ç–∞–ø 3: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è SVMedia (7-10 –¥–Ω–µ–π)

#### 3.1 –î–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å SVMedia.apk
- [ ] –ò–∑—É—á–∏—Ç—å –∫–æ–¥ –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- [ ] –ù–∞–π—Ç–∏ –≥–¥–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- [ ] –ü–æ–Ω—è—Ç—å —Ñ–æ—Ä–º–∞—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ SVMeterInteraction

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
```bash
# –î–µ–∫–æ–º–ø–∏–ª—è—Ü–∏—è
jadx -d SVMedia_sources SVMedia.apk
```

#### 3.2 –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ "–Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∞"

**–ó–∞–¥–∞—á–∏:**
- [ ] –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å UI –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∏

**–ö–æ–¥:**
```java
// –í MediaMainActivity
private void onSourceSelected(int sourceId) {
    switch (sourceId) {
        case R.id.source_yandex_music:
            launchYandexMusic();
            startMetadataListener();
            break;
        // ... –¥—Ä—É–≥–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
    }
}

private void launchYandexMusic() {
    Intent intent = new Intent();
    intent.setComponent(new ComponentName(
        "ru.yandex.music",
        "ru.yandex.music.ui.MainActivity"
    ));
    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);
}
```

#### 3.3 –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å MediaSession API listener
- [ ] –ü–æ–ª—É—á–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ—Ç –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∏
- [ ] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

**–ö–æ–¥:**
```java
public class YandexMusicMetadataListener {
    private MediaController mediaController;
    
    public void startListening() {
        MediaSessionManager sessionManager = 
            (MediaSessionManager) context.getSystemService(Context.MEDIA_SESSION_SERVICE);
        
        List<MediaController> controllers = sessionManager.getActiveSessions(
            new ComponentName(context, MediaButtonReceiver.class)
        );
        
        for (MediaController controller : controllers) {
            if ("ru.yandex.music".equals(controller.getPackageName())) {
                mediaController = controller;
                mediaController.registerCallback(callback);
                break;
            }
        }
    }
    
    private MediaController.Callback callback = new MediaController.Callback() {
        @Override
        public void onMetadataChanged(MediaMetadata metadata) {
            String artist = metadata.getString(MediaMetadata.METADATA_KEY_ARTIST);
            String title = metadata.getString(MediaMetadata.METADATA_KEY_TITLE);
            String album = metadata.getString(MediaMetadata.METADATA_KEY_ALBUM);
            
            sendToMeterInteraction(artist, title, album);
        }
    };
}
```

#### 3.4 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π

**–ó–∞–¥–∞—á–∏:**
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ SVMeterInteraction
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ Broadcast Intent
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –ø—Ä–∏–±–æ—Ä–Ω–æ–π –ø–∞–Ω–µ–ª–∏

**–ö–æ–¥:**
```java
private void sendToMeterInteraction(String artist, String title, String album) {
    Intent intent = new Intent("com.desaysv.mediaservice.TRACK_UPDATE");
    intent.putExtra("artist", artist);
    intent.putExtra("title", title);
    intent.putExtra("album", album);
    intent.putExtra("source", "yandex_music");
    sendBroadcast(intent);
}
```

---

### –≠—Ç–∞–ø 4: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Bridge Service (7-10 –¥–Ω–µ–π)

#### 4.1 –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç Android Studio
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

**–†–∞–∑—Ä–µ—à–µ–Ω–∏—è:**
```xml
<uses-permission android:name="android.permission.QUERY_ALL_PACKAGES"/>
<uses-permission android:name="android.permission.REORDER_TASKS"/>
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/>
```

#### 4.2 –ó–∞–ø—É—Å–∫ –Ø–Ω–¥–µ–∫—Å –ù–∞–≤–∏–≥–∞—Ç–æ—Ä–∞

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–ø—É—Å–∫ –Ø–Ω–¥–µ–∫—Å –ù–∞–≤–∏–≥–∞—Ç–æ—Ä–∞ (–∏–∑ NS.apk)
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### 4.3 –ü–µ—Ä–µ—Ö–≤–∞—Ç —Å–æ–±—ã—Ç–∏–π

**–ó–∞–¥–∞—á–∏:**
- [ ] –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –Ø–Ω–¥–µ–∫—Å –ù–∞–≤–∏–≥–∞—Ç–æ—Ä–∞
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Broadcast Receiver
- [ ] –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Accessibility Service

#### 4.4 –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–¥–∞—á–∏:**
- [ ] –ò–∑—É—á–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö TurboDog
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–µ—Ä –¥–∞–Ω–Ω—ã—Ö
- [ ] –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

#### 4.5 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π

**–ó–∞–¥–∞—á–∏:**
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ SVMeterInteraction
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ CAN-—à–∏–Ω—É
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ QNX (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

### –≠—Ç–∞–ø 5: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Media Bridge (5-7 –¥–Ω–µ–π)

#### 5.1 –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç Android Studio
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

#### 5.2 –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

**–ó–∞–¥–∞—á–∏:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å MediaSession API listener
- [ ] –ü–æ–ª—É—á–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- [ ] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 5.3 –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ —Å–∏—Å—Ç–µ–º—É

**–ó–∞–¥–∞—á–∏:**
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ SVMeterInteraction
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

### –≠—Ç–∞–ø 6: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (3-5 –¥–Ω–µ–π)

#### 6.1 –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ APK

**–ó–∞–¥–∞—á–∏:**
- [ ] –ü–æ–¥–ø–∏—Å–∞—Ç—å –≤—Å–µ APK
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

#### 6.2 –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∫–∞—Ç

**–°–∫—Ä–∏–ø—Ç:**
```bash
#!/bin/bash
# install_package.sh

echo "Starting installation..."

# 1. Backup
echo "Creating backup..."
./backup_system.sh

# 2. Root access
echo "Getting root access..."
adb root
adb remount

# 3. Install Custom Launcher
echo "Installing Custom Launcher..."
adb push CustomLauncher.apk /system/app/CustomLauncher/
adb shell chmod 644 /system/app/CustomLauncher/CustomLauncher.apk

# 4. Install modified SVMedia
echo "Installing modified SVMedia..."
adb push SVMedia_modified.apk /system/app/SVMedia/
adb shell chmod 644 /system/app/SVMedia/SVMedia_modified.apk

# 5. Install Bridge Service
echo "Installing Bridge Service..."
adb push BridgeService.apk /system/priv-app/BridgeService/
adb shell chmod 644 /system/priv-app/BridgeService/BridgeService.apk

# 6. Install Media Bridge
echo "Installing Media Bridge..."
adb push MediaBridge.apk /system/priv-app/MediaBridge/
adb shell chmod 644 /system/priv-app/MediaBridge/MediaBridge.apk

# 7. Reboot
echo "Rebooting..."
adb reboot

echo "Installation complete!"
```

#### 6.3 –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –æ—Ç–∫–∞—Ç–∞

**–ó–∞–¥–∞—á–∏:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –æ—Ç–∫–∞—Ç–∞
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ª–∞—É–Ω—á–µ—Ä

**–°–∫—Ä–∏–ø—Ç:**
```bash
#!/bin/bash
# rollback.sh

echo "Starting rollback..."

# 1. Root access
adb root
adb remount

# 2. Remove our apps
echo "Removing our apps..."
adb shell rm -rf /system/app/CustomLauncher/
adb shell rm -rf /system/app/SVMedia/
adb shell rm -rf /system/priv-app/BridgeService/
adb shell rm -rf /system/priv-app/MediaBridge/

# 3. Restore original apps
echo "Restoring original apps..."
adb push ./backup/system_app/SVMedia/ /system/app/SVMedia/

# 4. Reboot
echo "Rebooting..."
adb reboot

echo "Rollback complete!"
```

---

### –≠—Ç–∞–ø 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (5-7 –¥–Ω–µ–π)

#### 7.1 –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞–¥–∞—á–∏:**
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Custom Launcher
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ SVMedia
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Bridge Service
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Media Bridge

#### 7.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞–¥–∞—á–∏:**
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –ø—Ä–∏–±–æ—Ä–Ω–æ–π –ø–∞–Ω–µ–ª–∏
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å CAN/QNX

#### 7.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

**Custom Launcher:**
```xml
<uses-permission android:name="android.permission.QUERY_ALL_PACKAGES"/>
<uses-permission android:name="android.permission.SET_PREFERRED_APPLICATIONS"/>
```

**Bridge Service:**
```xml
<uses-permission android:name="android.permission.QUERY_ALL_PACKAGES"/>
<uses-permission android:name="android.permission.REORDER_TASKS"/>
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/>
```

**Media Bridge:**
```xml
<uses-permission android:name="android.permission.MEDIA_CONTENT_CONTROL"/>
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ü—É—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
- `/system/app/` - –æ–±—ã—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `/system/priv-app/` - –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
```bash
chmod 644 /system/app/MyApp/MyApp.apk
chown root:root /system/app/MyApp/MyApp.apk
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ—Ç–∫–∞—Ç—É

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ü—Ä–æ—Ü–µ–¥—É—Ä—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

**–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω –≥–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏  
**–î–∞—Ç–∞:** 2024  
**–í–µ—Ä—Å–∏—è:** 1.0

