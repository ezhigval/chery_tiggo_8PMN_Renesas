# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É T18FL3 Emulator

## ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∑–∞–ø—É—Å–∫—É

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–û–±—Ä–∞–∑—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ë–ï–ó —É—Å—Ç–∞–Ω–æ–≤–∫–∏!**

QEMU –º–æ–∂–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å ext2 –æ–±—Ä–∞–∑—ã –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `format=raw`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- ‚úÖ **–ù–ï –Ω—É–∂–Ω–æ** —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ–±—Ä–∞–∑—ã –≤ —Å–∏—Å—Ç–µ–º—É
- ‚úÖ **–ù–ï –Ω—É–∂–Ω–æ** —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –û–±—Ä–∞–∑—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–∫–∞–∫ –µ—Å—Ç—å** —á–µ—Ä–µ–∑ QEMU

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. QEMU –º–æ–Ω—Ç–∏—Ä—É–µ—Ç `system.img`, `vendor.img`, `product.img` –∫–∞–∫ raw –¥–∏—Å–∫–∏
2. Android kernel –≤–∏–¥–∏—Ç –∏—Ö –∫–∞–∫ –±–ª–æ—á–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/dev/vda`, `/dev/vdb`, `/dev/vdc`)
3. Android –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –∏—Ö –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`/system`, `/vendor`, `/product`)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º (–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —Ö–æ—Å—Ç–µ:
```bash
# –°–æ–∑–¥–∞–µ–º —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
mkdir -p /tmp/t18fl3_mount

# –ú–æ–Ω—Ç–∏—Ä—É–µ–º ext2 –æ–±—Ä–∞–∑ (macOS —Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
# –ù–∞ Linux:
sudo mount -o loop update_extracted/payload/system.img /tmp/t18fl3_mount

# –ö–æ–ø–∏—Ä—É–µ–º/–∏–∑–º–µ–Ω—è–µ–º —Ñ–∞–π–ª—ã
# ...

# –†–∞–∑–º–æ–Ω—Ç–∏—Ä—É–µ–º
sudo umount /tmp/t18fl3_mount
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –≠—Ç–æ –ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫:
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–±—Ä–∞–∑–∞—Ö –º–æ–≥—É—Ç –Ω–∞—Ä—É—à–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å
- –¢—Ä–µ–±—É–µ—Ç root –ø—Ä–∞–≤
- –ù–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å —ç–º—É–ª—è—Ç–æ—Ä–æ–º

## üöÄ –ó–∞–ø—É—Å–∫ —ç–º—É–ª—è—Ç–æ—Ä–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤

```bash
cd /Users/valentinezov/Projects/Tiggo/development/emulator

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –æ–±—Ä–∞–∑–æ–≤
ls -lh ../../update_extracted/payload/*.img
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- ‚úÖ `boot.img` - Android boot image
- ‚úÖ `system.img` - Android system (ext2)
- ‚úÖ `vendor.img` - Android vendor (ext2)
- ‚úÖ `product.img` - Android product (ext2)
- ‚úÖ `dtb.img` - Device Tree Blob
- ‚úÖ `qnx_boot.img` - QNX boot (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ `qnx_system.img` - QNX system (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ QEMU

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ QEMU
which qemu-system-aarch64

# –ï—Å–ª–∏ –Ω–µ—Ç, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º (macOS)
brew install qemu
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ —ç–º—É–ª—è—Ç–æ—Ä–∞

```bash
python main.py
```

### –®–∞–≥ 5: –í —ç–º—É–ª—è—Ç–æ—Ä–µ

1. –ù–∞–∂–º–∏—Ç–µ **"Start"** –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ QEMU (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—Ä–∞–∑–æ–≤)
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ VNC:
   - Display 1: `vncviewer localhost:5900`
   - Display 2: `vncviewer localhost:5901`
4. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –¥–∏—Å–ø–ª–µ–∏ (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

## üìã –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

### 1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–∑ boot.img

–≠–º—É–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç kernel –∏–∑ `boot.img`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç ramdisk –∏–∑ `boot.img`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ Android

### 2. –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤

QEMU –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–∑—ã –∫–∞–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –¥–∏—Å–∫–∏:
```
system.img  ‚Üí /dev/vda  ‚Üí /system (–≤ Android)
vendor.img  ‚Üí /dev/vdb  ‚Üí /vendor (–≤ Android)
product.img ‚Üí /dev/vdc  ‚Üí /product (–≤ Android)
```

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ Android

Android kernel:
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–≥–æ kernel
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ramdisk –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ä–∞–∑–¥–µ–ª—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –û–±—Ä–∞–∑—ã –ù–ï –∏–∑–º–µ–Ω—è—é—Ç—Å—è

- ‚úÖ –≠–º—É–ª—è—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±—Ä–∞–∑–∞–º–∏ **—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è**
- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –≤ `userdata.img` (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º (–∑–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—Ä–∞–∑–æ–≤)
- `product.img` –≤–µ—Å–∏—Ç 12 GB - —Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `cache=writeback` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### QEMU –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
# macOS
brew install qemu

# Linux
sudo apt-get install qemu-system-arm
```

#### –û–±—Ä–∞–∑—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –≤ `gui/main_window.py`:
```python
android_boot_img=Path("../../update_extracted/payload/boot.img"),
```

#### –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏
–£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä `product.img` –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ RAM —Ö–æ—Å—Ç–∞

#### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSD
- –£–≤–µ–ª–∏—á—å—Ç–µ RAM
- –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ GUI)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ QEMU:

```bash
cd /Users/valentinezov/Projects/Tiggo/development/scripts
./simulate_t18fl3_complete.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç kernel –∏ ramdisk
- –°–æ–∑–¥–∞–µ—Ç userdata –∏ cache
- –ó–∞–ø—É—Å–∫–∞–µ—Ç QEMU —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

## ‚úÖ –ò—Ç–æ–≥

**–û–±—Ä–∞–∑—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ë–ï–ó —É—Å—Ç–∞–Ω–æ–≤–∫–∏!**

–ü—Ä–æ—Å—Ç–æ:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä
3. –ù–∞–∂–º–∏—Ç–µ Start

–≠–º—É–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ò–∑–≤–ª–µ—á–µ—Ç –Ω—É–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –°–º–æ–Ω—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–∑—ã
- –ó–∞–ø—É—Å—Ç–∏—Ç —Å–∏—Å—Ç–µ–º—É

**–ù–ï –Ω—É–∂–Ω–æ:**
- ‚ùå –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ–±—Ä–∞–∑—ã –≤ —Å–∏—Å—Ç–µ–º—É
- ‚ùå –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã
- ‚ùå –ò–∑–º–µ–Ω—è—Ç—å –æ–±—Ä–∞–∑—ã

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"!**

