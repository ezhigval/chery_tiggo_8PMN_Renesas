# –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã

## –ü—Ä–æ–±–ª–µ–º–∞
–Ø–¥—Ä–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –Ω–æ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç serial output. –ü—Ä–∏—á–∏–Ω–∞: —è–¥—Ä–æ –æ–∂–∏–¥–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ g6sh (0xe6e80000 –¥–ª—è SCIF), –∞ QEMU virt machine –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥—Ä–µ—Å–∞ virt (0x09000000 –¥–ª—è PL011).

## –ü–æ–ø—ã—Ç–∫–∏ —Ä–µ—à–µ–Ω–∏—è

### ‚ùå –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞—Å—Ç–∞–≤–∏—Ç—å —è–¥—Ä–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å virt (–ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï)
**–°—Ç–∞—Ç—É—Å:** –ù–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ
- –£–ø—Ä–æ—Å—Ç–∏–ª DTS - –∏—Å–ø–æ–ª—å–∑—É—é —Ç–æ–ª—å–∫–æ virt –∞–¥—Ä–µ—Å–∞ —Å SCIF —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é
- –ù–∞—Å—Ç—Ä–æ–∏–ª earlycon —Å SCIF –¥—Ä–∞–π–≤–µ—Ä–æ–º –Ω–∞ virt –∞–¥—Ä–µ—Å–µ
- –†–µ–∑—É–ª—å—Ç–∞—Ç: Serial output –≤—Å—ë –µ—â—ë –ø—É—Å—Ç–æ–π

**–í—ã–≤–æ–¥:** –Ø–¥—Ä–æ –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SCIF –¥—Ä–∞–π–≤–µ—Ä —Å PL011 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º –Ω–∞ virt –∞–¥—Ä–µ—Å–µ.

### üîÑ –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å QEMU (–ö–ê–ß–ï–°–¢–í–ï–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï)
**–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω QEMU
- ‚úÖ –°–æ–∑–¥–∞–Ω –±–∞–∑–æ–≤—ã–π —Ñ–∞–π–ª `hw/arm/g6sh.c` —Å –º–∞—à–∏–Ω–æ–π g6sh
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≤ `meson.build` –∏ `Kconfig`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏ (GIC –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ API)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –¥–ª—è SCIF —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (0xe6e80000, 0xe6e88000)

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
2. –°–æ–±—Ä–∞—Ç—å QEMU: `cd qemu_custom/qemu && ./configure --target-list=aarch64-softmmu && make -j$(sysctl -n hw.ncpu)`
3. –û–±–Ω–æ–≤–∏—Ç—å `qemu_manager.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ QEMU –∏ –º–∞—à–∏–Ω—ã g6sh
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–≤–æ–π –º–∞—à–∏–Ω–æ–π: `qemu-system-aarch64 -M g6sh ...`

**–§–∞–π–ª—ã:**
- `/Users/valentinezov/Projects/Tiggo/qemu_custom/qemu/hw/arm/g6sh.c` - –±–∞–∑–æ–≤–∞—è –º–∞—à–∏–Ω–∞
- `/Users/valentinezov/Projects/Tiggo/qemu_custom/qemu/hw/arm/meson.build` - –¥–æ–±–∞–≤–ª–µ–Ω g6sh
- `/Users/valentinezov/Projects/Tiggo/qemu_custom/qemu/hw/arm/Kconfig` - –¥–æ–±–∞–≤–ª–µ–Ω CONFIG_G6SH

### ‚è≥ –í–∞—Ä–∏–∞–Ω—Ç 3: Renode (–ó–ê–ü–ê–°–ù–û–ô –í–ê–†–ò–ê–ù–¢)
**–°—Ç–∞—Ç—É—Å:** –ù–µ –Ω–∞—á–∞—Ç
- –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è QEMU –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- ‚úÖ QEMU –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚úÖ –Ø–¥—Ä–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (PC —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–¥ —è–¥—Ä–∞)
- ‚ùå Serial output –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚ùå –≠–∫—Ä–∞–Ω—ã —á—ë—Ä–Ω—ã–µ (–Ω–µ—Ç –≥—Ä–∞—Ñ–∏–∫–∏)

## –°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –≤ `g6sh.c`
2. –°–æ–±—Ä–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π QEMU
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–≤–æ–π –º–∞—à–∏–Ω–æ–π g6sh
4. –ï—Å–ª–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Renode

