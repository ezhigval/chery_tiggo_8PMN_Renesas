# Изучение официальной документации Яндекс API

## Цель

Найти легальные способы получения данных навигации из Яндекс Навигатора через официальные API и SDK.

## Важное понимание

### MapKit SDK vs Яндекс.Навигатор

**MapKit SDK** и **NaviKit SDK** - это инструменты для **встраивания** навигационных функций в **свои приложения**.

**Яндекс.Навигатор** - это **готовое приложение**, которое использует эти SDK внутри себя.

**Проблема:** SDK предназначены для создания навигации в своем приложении, а не для получения данных из уже запущенного Яндекс.Навигатора.

## Официальные ресурсы

### 1. Яндекс для разработчиков

**Сайт:** https://yandex.ru/dev/

**Основные разделы:**
- **MapKit SDK:** https://yandex.ru/dev/mapkit/
- **NaviKit SDK:** (часть MapKit или отдельный SDK)
- **Запуск приложений:** https://yandex.ru/dev/yandex-apps-launch/navigator/

### 2. MapKit SDK для Android

**Документация:** https://yandex.ru/dev/mapkit/doc/android/

**Основные возможности:**
- Отображение карт
- Поиск
- Маршрутизация
- Навигация (в своем приложении)

### 3. NaviKit SDK

**Статус:** NaviKit SDK - это часть MapKit SDK или отдельный SDK для навигации

**Назначение:** Добавление навигационных функций в свое приложение

## Что можно сделать легально

### 1. Использование MapKit/NaviKit SDK в своем приложении

**Возможности:**
- Создать свое навигационное приложение
- Использовать карты Яндекса
- Реализовать маршрутизацию
- Добавить навигацию

**Ограничения:**
- Это создание нового приложения, а не интеграция с Яндекс.Навигатором
- Не позволяет получить данные из уже запущенного Яндекс.Навигатора

### 2. URL-схема для запуска Яндекс.Навигатора

**Документация:** https://yandex.ru/dev/yandex-apps-launch/navigator/

**Возможности:**
- Запустить Яндекс.Навигатор с определенным маршрутом
- Передать координаты точки назначения
- Передать поисковый запрос

**Ограничения:**
- Только запуск навигатора
- Не позволяет получить данные из навигатора
- Не позволяет перехватывать данные навигации

### 3. Получение данных из запущенного Яндекс.Навигатора

**Статус:** ❌ Нет официального API

**Причина:** Яндекс.Навигатор - это закрытое приложение, которое не предоставляет публичного API для получения данных навигации.

## Альтернативные подходы

### 1. Использование внутренних API через Reflection

**Статус:** ⚠️ Неофициально, но технически возможно

**Что мы нашли:**
- `com.yandex.navikit.guidance.Guidance` - интерфейс навигации
- `GenericGuidanceComponent.INSTANCE.getGenericGuidance()` - способ получения
- `NotificationDataManager` - альтернативный способ получения данных

**Проблемы:**
- API не документирован публично
- Может изменяться между версиями
- Не гарантируется стабильность

**Рекомендация:** Использовать как fallback, если официальных способов нет

### 2. Мониторинг файловой системы

**Статус:** ⏳ Требует исследования

**Идея:** Яндекс.Навигатор может сохранять данные навигации в файлы, которые можно мониторить

**Проблемы:**
- Требует разрешений на доступ к файлам
- Формат данных может быть закрытым
- Может быть нестабильным

### 3. Мониторинг SharedPreferences

**Статус:** ⏳ Требует исследования

**Идея:** Проверить, сохраняет ли навигатор данные в SharedPreferences

**Проблемы:**
- Требует разрешений
- Данные могут быть зашифрованы

## Рекомендации

### Приоритет 1: Изучить официальную документацию MapKit SDK

**Действия:**
1. Зарегистрироваться на https://yandex.ru/dev/
2. Получить API ключ (если требуется)
3. Изучить документацию MapKit SDK для Android
4. Найти раздел про навигацию (Navigation/Guidance)
5. Проверить, есть ли способы получения данных навигации

**Ссылки:**
- https://yandex.ru/dev/mapkit/doc/android/
- https://yandex.ru/dev/mapkit/doc/android/quickstart.html

### Приоритет 2: Изучить примеры кода

**Действия:**
1. Найти примеры использования MapKit SDK
2. Проверить GitHub на наличие примеров
3. Изучить, как используется Guidance API в примерах

**Возможные источники:**
- Официальные примеры в документации
- GitHub репозитории (если есть)
- Декомпилированный код Яндекс.Навигатора

### Приоритет 3: Обратиться в поддержку

**Действия:**
1. Написать в поддержку Яндекс для разработчиков
2. Задать вопрос о доступе к данным навигации из другого приложения
3. Уточнить, есть ли публичный API для получения данных навигации

**Вопросы для поддержки:**
- Можно ли получить данные навигации (маневры, расстояние, время) из уже запущенного Яндекс.Навигатора?
- Есть ли публичный API для интеграции с Яндекс.Навигатором?
- Можно ли использовать NaviKit SDK для получения данных из Яндекс.Навигатора?

### Приоритет 4: Альтернативные подходы

**Если официальных способов нет:**
1. Использовать Reflection для доступа к внутренним API
2. Исследовать файловую систему навигатора
3. Проверить SharedPreferences

## План действий

### Шаг 1: Регистрация и изучение документации

1. ✅ Зарегистрироваться на yandex.ru/dev
2. ⏳ Изучить документацию MapKit SDK
3. ⏳ Найти раздел про навигацию
4. ⏳ Проверить примеры кода

### Шаг 2: Поиск примеров

1. ⏳ Найти официальные примеры
2. ⏳ Проверить GitHub
3. ⏳ Изучить декомпилированный код

### Шаг 3: Эксперименты

1. ⏳ Попробовать использовать MapKit SDK в тестовом приложении
2. ⏳ Проверить, можно ли получить Guidance через официальный API
3. ⏳ Протестировать NotificationDataManager

### Шаг 4: Обращение в поддержку

1. ⏳ Подготовить вопросы
2. ⏳ Написать в поддержку
3. ⏳ Дождаться ответа

## Важные замечания

### Ограничения официального API

1. **MapKit SDK** предназначен для создания навигации в своем приложении
2. **Нет публичного API** для получения данных из Яндекс.Навигатора
3. **URL-схема** позволяет только запустить навигатор, но не получить данные

### Почему Reflection может быть единственным способом

1. Яндекс.Навигатор - закрытое приложение
2. Не предоставляет публичного API для интеграции
3. Внутренние API (`com.yandex.navikit.*`) не документированы публично
4. Reflection - единственный способ получить доступ к внутренним API

### Рекомендация

**Использовать комбинированный подход:**
1. Изучить официальную документацию (приоритет)
2. Если официальных способов нет - использовать Reflection как fallback
3. Документировать все найденные способы

## Следующие шаги

1. ⏳ **Изучить документацию MapKit SDK** - найти раздел про навигацию
2. ⏳ **Найти примеры кода** - как используется Guidance API
3. ⏳ **Попробовать официальный API** - создать тестовое приложение
4. ⏳ **Обратиться в поддержку** - уточнить возможности интеграции

## Полезные ссылки

- **Яндекс для разработчиков:** https://yandex.ru/dev/
- **MapKit SDK Android:** https://yandex.ru/dev/mapkit/doc/android/
- **Запуск Яндекс.Навигатора:** https://yandex.ru/dev/yandex-apps-launch/navigator/
- **GitHub (возможно):** Поиск "yandex mapkit android github"

## Выводы

1. ✅ **Официального API для получения данных из Яндекс.Навигатора нет**
2. ⚠️ **MapKit SDK предназначен для создания навигации в своем приложении**
3. ⚠️ **Reflection может быть единственным способом получить данные**
4. ✅ **Нужно изучить документацию, чтобы убедиться**

## Обновления

**Дата:** Ноябрь 2024
**Статус:** В процессе изучения документации

