# Места перехвата данных в Yandex Maps

## Найденные классы и методы

### 1. SpeedLimitView и контроллеры

**Класс:** `ru.yandex.yandexmaps.multiplatform.settings.ui.internal.controller.x`

- Файл: `smali_classes10/ru/yandex/yandexmaps/multiplatform/settings/ui/internal/controller/x.smali`
- Содержит поля: `b`, `c`, `d` типа `SpeedLimitView`

**Класс:** `ru.yandex.yandexmaps.multiplatform.settings.ui.internal.controller.SpeedLimitView`

- Файл: `smali_classes10/ru/yandex/yandexmaps/multiplatform/settings/ui/internal/controller/SpeedLimitView.smali`
- Содержит поля: `b` (ImageView), `c` (TextView primaryText), `d` (TextView secondaryText)

### 2. Вызовы API методов

**Найдено:**

- `invoke-interface {p1}, Lcom/yandex/mapkit/navigation/automotive/SpeedLimitsPolicy;->getLegalSpeedLimits()Lcom/yandex/mapkit/navigation/automotive/SpeedLimits;`
- В файле: `smali_classes10/ru/yandex/yandexmaps/multiplatform/settings/ui/internal/controller/x.smali` (строка ~414)

### 3. План модификации

#### Вариант 1: Перехват после вызова API

```smali
# Оригинальный код:
invoke-interface {p1}, Lcom/yandex/mapkit/navigation/automotive/SpeedLimitsPolicy;->getLegalSpeedLimits()Lcom/yandex/mapkit/navigation/automotive/SpeedLimits;
move-result-object v0

# Добавляем после move-result-object:
# Сохраняем результат в регистр для перехвата
move-object v1, v0

# Вызываем наш перехватчик
invoke-static {v1}, Lru/yandex/yandexmaps/bridge/TiggoBridgeSender;->interceptSpeedLimits(Lcom/yandex/mapkit/navigation/automotive/SpeedLimits;)V

# Продолжаем оригинальный код
move-object v0, v1
```

#### Вариант 2: Перехват при сохранении в поле

```smali
# Оригинальный код:
iput-object v0, p0, Lcom/yandex/navikit/ui/guidance/SpeedLimitPresenter;->speedLimit:Lcom/yandex/mapkit/LocalizedValue;

# Добавляем после iput-object:
# Вызываем перехватчик с объектом из регистра v0
invoke-static {v0}, Lru/yandex/yandexmaps/bridge/TiggoBridgeSender;->interceptSpeedLimit(Lcom/yandex/mapkit/LocalizedValue;)V
```

## Следующие шаги

1. ⏳ Найти точные места сохранения speedLimit в переменные
2. ⏳ Найти места сохранения маневров
3. ⏳ Найти места сохранения маршрута
4. ⏳ Создать методы перехвата в TiggoBridgeSender
5. ⏳ Модифицировать smali код для вызова перехватчиков
