# –ù–∞—Ç–∏–≤–Ω—ã–π –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä –Ω–∞ C/C++ - –° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å

## üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–π –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä –Ω–∞ C/C++, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ—Ö–æ–∂–∏–π –Ω–∞ TurboDog, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –¥–∞–Ω–Ω—ã–µ Yandex MapKit API.

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–î–ï–ù–¨ 1)

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:**
   ```bash
   # Android Studio (—É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω?)
   # Android NDK (—á–µ—Ä–µ–∑ Android Studio SDK Manager)
   # CMake (—á–µ—Ä–µ–∑ Android Studio SDK Manager)
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞:**
   - ‚úÖ CMakeLists.txt —Å–æ–∑–¥–∞–Ω
   - ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ —Å–æ–∑–¥–∞–Ω–∞
   - ‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã

### –≠—Ç–∞–ø 2: Java —Å–ª–æ–π –∏ JNI (–î–ï–ù–¨ 2-3)

1. **–°–æ–∑–¥–∞—Ç—å Java –∫–ª–∞—Å—Å—ã:**
   - `NavigationService.java` - —Å–µ—Ä–≤–∏—Å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
   - `YandexMapKitBridge.java` - –º–æ—Å—Ç –∫ Yandex MapKit
   - `MainActivity.java` - –≥–ª–∞–≤–Ω–∞—è Activity
   - `GLSurfaceViewEx.java` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π GLSurfaceView

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å JNI:**
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –∏–∑ `jni_navigator.cpp`
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤—ã –∏–∑ Java –≤ C++

### –≠—Ç–∞–ø 3: –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –¥–≤–∏–∂–∫–∞ (–î–ï–ù–¨ 4-7)

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NavigatorEngine:**
   - `navigator_engine.cpp` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
   - `navigation_state.cpp` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
   - `gps_processor.cpp` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ GPS
   - `route_calculator.cpp` - —Ä–∞—Å—á–µ—Ç –º–∞—Ä—à—Ä—É—Ç–æ–≤

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex:**
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç Yandex —á–µ—Ä–µ–∑ Java
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–∞—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –≠—Ç–∞–ø 4: OpenGL ES —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ (–î–ï–ù–¨ 8-14)

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å RenderEngine:**
   - `render_engine.cpp` - –≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
   - `map_renderer.cpp` - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∫–∞—Ä—Ç—ã
   - `route_renderer.cpp` - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–∞—Ä—à—Ä—É—Ç–∞
   - `ui_renderer.cpp` - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ UI

2. **–®–µ–π–¥–µ—Ä—ã:**
   - `map.vert/frag` - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ç–∞–π–ª–æ–≤
   - `route.vert/frag` - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ–ª–∏–ª–∏–Ω–∏–π
   - `ui.vert/frag` - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### –≠—Ç–∞–ø 5: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–î–ï–ù–¨ 15-18)

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å TaskQueue:**
   - `task_queue.cpp` - –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á
   - `thread_pool.cpp` - –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤
   - `async_loader.cpp` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–ª–æ–≤
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π (–î–ï–ù–¨ 19-21)

1. **Android –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
   - Broadcast —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å TurboDog
   - Presentation –æ–∫–Ω–æ –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ –¥–∏—Å–ø–ª–µ—è
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MapService

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —ç–º—É–ª—è—Ç–æ—Ä–µ
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å Android –ø—Ä–æ–µ–∫—Ç

1. –û—Ç–∫—Ä—ã—Ç—å Android Studio
2. File -> New -> New Project
3. –í—ã–±—Ä–∞—Ç—å "Native C++" template
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

### –®–∞–≥ 2: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å CMakeLists.txt
cp development/native_navigator/CMakeLists.txt app/

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥
cp -r development/native_navigator/native/ app/src/main/cpp/
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å build.gradle

```gradle
android {
    ...
    defaultConfig {
        ...
        externalNativeBuild {
            cmake {
                cppFlags "-std=c++17"
                arguments "-DANDROID_STL=c++_shared"
            }
        }
        ndk {
            abiFilters 'armeabi-v7a', 'arm64-v8a'
        }
    }
    
    externalNativeBuild {
        cmake {
            path "CMakeLists.txt"
        }
    }
}
```

### –®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å Java –∫–ª–∞—Å—Å—ã

–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ Java –∫–ª–∞—Å—Å—ã (—Å–º. –ø—Ä–∏–º–µ—Ä—ã –Ω–∏–∂–µ)

### –®–∞–≥ 5: –ö–æ–º–ø–∏–ª—è—Ü–∏—è

```bash
./gradlew assembleDebug
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
native_navigator/
‚îú‚îÄ‚îÄ CMakeLists.txt              ‚úÖ –°–æ–∑–¥–∞–Ω
‚îú‚îÄ‚îÄ native/
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ navigator_engine.h ‚úÖ –°–æ–∑–¥–∞–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ navigator_engine.cpp ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ navigation_state.h   ‚úÖ –°–æ–∑–¥–∞–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ navigation_state.cpp ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gps_processor.h      ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ route_calculator.h   ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ render/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...                  ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ async/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...                  ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...                  ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
‚îÇ   ‚îî‚îÄ‚îÄ jni/
‚îÇ       ‚îú‚îÄ‚îÄ jni_navigator.cpp    ‚úÖ –°–æ–∑–¥–∞–Ω (–±–∞–∑–æ–≤—ã–π)
‚îÇ       ‚îú‚îÄ‚îÄ jni_renderer.cpp     ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
‚îÇ       ‚îî‚îÄ‚îÄ jni_utils.h/cpp      ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
‚îî‚îÄ‚îÄ android/
    ‚îî‚îÄ‚îÄ app/
        ‚îî‚îÄ‚îÄ src/
            ‚îî‚îÄ‚îÄ main/
                ‚îî‚îÄ‚îÄ java/
                    ‚îî‚îÄ‚îÄ com/
                        ‚îî‚îÄ‚îÄ tiggo/
                            ‚îî‚îÄ‚îÄ navigator/
                                ‚îú‚îÄ‚îÄ MainActivity.java        ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
                                ‚îú‚îÄ‚îÄ NavigationService.java   ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
                                ‚îú‚îÄ‚îÄ YandexMapKitBridge.java  ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
                                ‚îî‚îÄ‚îÄ GLSurfaceViewEx.java     ‚è≥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å
```

## üîß –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** - –ì–û–¢–û–í–û
2. ‚è≥ **–°–æ–∑–¥–∞—Ç—å Java –∫–ª–∞—Å—Å—ã** - –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì
3. ‚è≥ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π NavigatorEngine**
4. ‚è≥ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å OpenGL ES —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥**
5. ‚è≥ **–î–æ–±–∞–≤–∏—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è/06_–¢–ï–•–ù–ò–ß–ï–°–ö–û–ï_–ó–ê–î–ê–ù–ò–ï/NATIVE_NAVIGATOR_ARCHITECTURE.md)
- [TurboDog —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è/06_–¢–ï–•–ù–ò–ß–ï–°–ö–û–ï_–ó–ê–î–ê–ù–ò–ï/TURBODOG_TECHNOLOGY.md)
- [Yandex MapKit –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è/06_–¢–ï–•–ù–ò–ß–ï–°–ö–û–ï_–ó–ê–î–ê–ù–ò–ï/YANDEX_MAPKIT_INTEGRATION.md)

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å C++17** –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. **Thread-safe** –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –æ–±—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. **Memory management** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å smart pointers
4. **OpenGL ES 3.0** –¥–ª—è –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è
5. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** –¥–ª—è –≤—Å–µ—Ö –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

